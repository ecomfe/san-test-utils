<!doctype html><html><head><meta charset="utf-8"/><title>san-test-utils</title><link rel="icon" href="https://baidu.github.io/san/img/favicon.ico"><script>window['SAN_DOCIT'] = {};</script><base href="/san-test-utils/"><meta name="description" content="单元测试实用工具库"><link href="/san-test-utils/static/css/chunk-vendors.css" rel="stylesheet"></head><body><div id="app"><div id="site"><header id="header"><a href="/san-test-utils/" class="navbar"><img src="/san-test-utils/logo.svg" alt="Home" class="logo"> <span>san-test-utils</span></a><ul></ul></header><aside id="sidebar" class="sidebar"><ul class="tree"><li><span>介绍</span><ul><li data-id="/"><a href="/san-test-utils/" onclick="return false;">介绍</a></li></ul></li><li><span>教程</span><ul><li data-id="/guides/start/"><a href="/san-test-utils/guides/start/" onclick="return false;">起步</a></li><li data-id="/guides/common-tips/"><a href="/san-test-utils/guides/common-tips/" onclick="return false;">常用技巧</a></li><li data-id="/guides/event/"><a href="/san-test-utils/guides/event/" onclick="return false;">测试键盘、鼠标等其它 DOM 事件</a></li><li data-id="/guides/test-runner/"><a href="/san-test-utils/guides/test-runner/" onclick="return false;">选择一个测试运行器</a></li><li data-id="/guides/jest-demo/"><a href="/san-test-utils/guides/jest-demo/" onclick="return false;">用 Jest 测试组件</a></li><li data-id="/guides/mocha-demo/"><a href="/san-test-utils/guides/mocha-demo/" onclick="return false;">用 Mocha 和 webpack 测试组件</a></li><li data-id="/guides/karma-demo/"><a href="/san-test-utils/guides/karma-demo/" onclick="return false;">用 Karma 测试组件</a></li><li data-id="/guides/async/"><a href="/san-test-utils/guides/async/" onclick="return false;">测试异步行为</a></li></ul></li><li><span>API</span><ul><li data-id="/api/attach/"><a href="/san-test-utils/api/attach/" onclick="return false;">attach</a></li><li data-id="/api/shallowAttach/"><a href="/san-test-utils/api/shallowAttach/" onclick="return false;">shallowAttach</a></li><li data-id="/api/render/"><a href="/san-test-utils/api/render/" onclick="return false;">render</a></li><li data-id="/api/renderToString/"><a href="/san-test-utils/api/renderToString/" onclick="return false;">renderToString</a></li><li data-id="/api/selector/"><a href="/san-test-utils/api/selector/" onclick="return false;">选择器</a></li><li data-id="/api/createWrapper/"><a href="/san-test-utils/api/createWrapper/" onclick="return false;">createWrapper</a></li><li data-id="/api/config/"><a href="/san-test-utils/api/config/" onclick="return false;">配置</a></li></ul></li><li><span>Wrapper</span><ul><li data-id="/wrapper/index/"><a href="/san-test-utils/wrapper/index/" onclick="return false;">属性</a></li><li data-id="/wrapper/attributes/"><a href="/san-test-utils/wrapper/attributes/" onclick="return false;">attributes</a></li><li data-id="/wrapper/classes/"><a href="/san-test-utils/wrapper/classes/" onclick="return false;">classes</a></li><li data-id="/wrapper/contains/"><a href="/san-test-utils/wrapper/contains/" onclick="return false;">contains</a></li><li data-id="/wrapper/fired/"><a href="/san-test-utils/wrapper/fired/" onclick="return false;">fired</a></li><li data-id="/wrapper/firedByOrder/"><a href="/san-test-utils/wrapper/firedByOrder/" onclick="return false;">firedByOrder</a></li><li data-id="/wrapper/data/"><a href="/san-test-utils/wrapper/data/" onclick="return false;">data</a></li><li data-id="/wrapper/detach/"><a href="/san-test-utils/wrapper/detach/" onclick="return false;">detach</a></li><li data-id="/wrapper/dispatched/"><a href="/san-test-utils/wrapper/dispatched/" onclick="return false;">dispatched</a></li><li data-id="/wrapper/dispatchedByOrder/"><a href="/san-test-utils/wrapper/dispatchedByOrder/" onclick="return false;">dispatchedByOrder</a></li><li data-id="/wrapper/exists/"><a href="/san-test-utils/wrapper/exists/" onclick="return false;">exists</a></li><li data-id="/wrapper/find/"><a href="/san-test-utils/wrapper/find/" onclick="return false;">find</a></li><li data-id="/wrapper/findAll/"><a href="/san-test-utils/wrapper/findAll/" onclick="return false;">findAll</a></li><li data-id="/wrapper/html/"><a href="/san-test-utils/wrapper/html/" onclick="return false;">html</a></li><li data-id="/wrapper/is/"><a href="/san-test-utils/wrapper/is/" onclick="return false;">is</a></li><li data-id="/wrapper/isEmpty/"><a href="/san-test-utils/wrapper/isEmpty/" onclick="return false;">isEmpty</a></li><li data-id="/wrapper/isVisible/"><a href="/san-test-utils/wrapper/isVisible/" onclick="return false;">isVisible</a></li><li data-id="/wrapper/isSanInstance/"><a href="/san-test-utils/wrapper/isSanInstance/" onclick="return false;">isSanInstance</a></li><li data-id="/wrapper/setChecked/"><a href="/san-test-utils/wrapper/setChecked/" onclick="return false;">setChecked</a></li><li data-id="/wrapper/setData/"><a href="/san-test-utils/wrapper/setData/" onclick="return false;">setData</a></li><li data-id="/wrapper/setMethods/"><a href="/san-test-utils/wrapper/setMethods/" onclick="return false;">setMethods</a></li><li data-id="/wrapper/setSelected/"><a href="/san-test-utils/wrapper/setSelected/" onclick="return false;">setSelected</a></li><li data-id="/wrapper/setValue/"><a href="/san-test-utils/wrapper/setValue/" onclick="return false;">setValue</a></li><li data-id="/wrapper/text/"><a href="/san-test-utils/wrapper/text/" onclick="return false;">text</a></li><li data-id="/wrapper/trigger/"><a href="/san-test-utils/wrapper/trigger/" onclick="return false;">trigger</a></li></ul></li><li><span>WrapperArray</span><ul><li data-id="/wrapperArray/index/"><a href="/san-test-utils/wrapperArray/index/" onclick="return false;">属性</a></li><li data-id="/wrapperArray/at/"><a href="/san-test-utils/wrapperArray/at/" onclick="return false;">at</a></li><li data-id="/wrapperArray/detach/"><a href="/san-test-utils/wrapperArray/detach/" onclick="return false;">detach</a></li><li data-id="/wrapperArray/filter/"><a href="/san-test-utils/wrapperArray/filter/" onclick="return false;">filter</a></li><li data-id="/wrapperArray/is/"><a href="/san-test-utils/wrapperArray/is/" onclick="return false;">is</a></li><li data-id="/wrapperArray/isEmpty/"><a href="/san-test-utils/wrapperArray/isEmpty/" onclick="return false;">isEmpty</a></li><li data-id="/wrapperArray/isSanInstance/"><a href="/san-test-utils/wrapperArray/isSanInstance/" onclick="return false;">isSanInstance</a></li><li data-id="/wrapperArray/setChecked/"><a href="/san-test-utils/wrapperArray/setChecked/" onclick="return false;">setChecked</a></li><li data-id="/wrapperArray/setData/"><a href="/san-test-utils/wrapperArray/setData/" onclick="return false;">setData</a></li><li data-id="/wrapperArray/setMethods/"><a href="/san-test-utils/wrapperArray/setMethods/" onclick="return false;">setMethods</a></li><li data-id="/wrapperArray/setValue/"><a href="/san-test-utils/wrapperArray/setValue/" onclick="return false;">setValue</a></li><li data-id="/wrapperArray/trigger/"><a href="/san-test-utils/wrapperArray/trigger/" onclick="return false;">trigger</a></li></ul></li><li><span>挂载选项</span><ul><li data-id="/attachOptions/slots/"><a href="/san-test-utils/attachOptions/slots/" onclick="return false;">slots</a></li><li data-id="/attachOptions/stubs/"><a href="/san-test-utils/attachOptions/stubs/" onclick="return false;">stubs</a></li><li data-id="/attachOptions/data/"><a href="/san-test-utils/attachOptions/data/" onclick="return false;">data</a></li><li data-id="/attachOptions/attachToDocument/"><a href="/san-test-utils/attachOptions/attachToDocument/" onclick="return false;">attachToDocument</a></li><li data-id="/attachOptions/parentComponent/"><a href="/san-test-utils/attachOptions/parentComponent/" onclick="return false;">parentComponent</a></li><li data-id="/attachOptions/methods/"><a href="/san-test-utils/attachOptions/methods/" onclick="return false;">methods</a></li></ul></li></ul></aside><article id="content"><div id="router-view" class="router-view"><div class="content markdown-content"><div class="markdown"><h1 id="%E7%94%A8-jest-%E6%B5%8B%E8%AF%95%E7%BB%84%E4%BB%B6">用 Jest 测试组件</h1><blockquote><p>我们在 <a href="https://github.com/ecomfe/san-test-utils/tree/master/docs/demo/jest" target="_blank">github</a> 上放有一个关于这些设置的示例工程。</p></blockquote><p>Jest 是一个由 Facebook 开发的测试运行器，致力于提供一个“bettery-included”单元测试解决方案。你可以在其<a href="https://jestjs.io/" target="_blank">官方文档</a>学习到更多 Jest 的知识。</p><h3 id="%E5%AE%89%E8%A3%85-jest">安装 Jest</h3><p>我们假定你在一开始已经安装并配置好了 webpack、san-loader 和 Babel。</p><p>我们要做的第一件事就是安装 <code>Jest</code> 和 <code>San Test Utils</code>：</p><pre class="language-js"><code class="language-js">$ npm install jest san<span class="token operator">-</span>test<span class="token operator">-</span>utils <span class="token operator">--</span>save<span class="token operator">-</span>dev</code></pre><p>然后我们需要在 <code>package.json</code> 中定义一个单元测试的脚本。</p><pre class="language-js"><code class="language-js"><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
    <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3 id="%E9%85%8D%E7%BD%AE-jest">配置 Jest</h3><p>接下来在 <code>package.json</code> 中创建一个 <code>jest</code> 块：</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token string-property property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;moduleFileExtensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;json&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3 id="%E5%A4%84%E7%90%86-webpack-%E5%88%AB%E5%90%8D">处理 webpack 别名</h3><p>如果你在 webpack 中配置了别名解析，比如把 <code>@</code> 设置为 <code>/src</code> 的别名，那么你也需要用 <code>moduleNameMapper</code> 选项为 Jest 增加一个匹配配置：</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token string-property property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token comment">// 支持源代码中相同的 `@` -&gt; `src` 别名</span>
        <span class="token string-property property">&quot;moduleNameMapper&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;^@/(.*)$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/src/$1&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3 id="%E4%B8%BA-jest-%E9%85%8D%E7%BD%AE-babel">为 Jest 配置 Babel</h3><p>尽管最新版本的 Node 已经支持绝大多数的 ES2015 特性，你可能仍然想要在你的测试中使用 ES modules 语法和 stage-x 的特性。为此我们需要安装 <code>babel-jest</code>：</p><pre class="language-js"><code class="language-js">$ npm install babel<span class="token operator">-</span>jest <span class="token operator">--</span>save<span class="token operator">-</span>dev</code></pre><p>接下来，我们需要在 <code>package.json</code> 的 <code>jest.transform</code> 里添加一个入口，来告诉 Jest 用 <code>babel-jest</code> 处理 JavaScript 测试文件：</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token string-property property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token string-property property">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token comment">// 用 `babel-jest` 处理 js</span>
            <span class="token string-property property">&quot;^.+\\.js$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/node_modules/babel-jest&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>我们假设 webpack 使用了 <code>babel-preset-env</code>，这时默认的 Babel 配置会关闭 ES modules 的转译，因为 webpack 已经可以处理 ES modules 了。然而，我们还是需要为我们的测试而开启它，因为 Jest 的测试用例会直接运行在 Node 上。</p><p>同样的，我们可以告诉 <code>babel-preset-env</code> 面向我们使用的 Node 版本。这样做会跳过转译不必要的特性使得测试启动更快。</p><p>为了仅在测试时应用这些选项，可以把它们放到一个独立的 <code>env.test</code> 配置项中 (这会被 <code>babel-jest</code> 自动获取)。</p><p><code>.babelrc</code> 文件示例：</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;current&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><h3 id="%E6%B5%8B%E8%AF%95-san-%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6">测试 San 单文件组件</h3><p>如果需要测试 .san 的单文件组件，我们需要安装 <code>san-jest</code> 转换器。</p><pre class="language-js"><code class="language-js">$ npm install san<span class="token operator">-</span>jest <span class="token operator">--</span>save<span class="token operator">-</span>dev</code></pre><p>在 package.json 的 <code>jest</code> 块中修改 <code>transform</code> 的配置:</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token string-property property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;testEnvironment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsdom&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;moduleFileExtensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;ts&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;san&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;^.+\\.js$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/node_modules/babel-jest&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;^.+\\.san$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/node_modules/san-jest&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;globals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;san-jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;templateCompileOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 对全部 .san 文件生效</span>
                    <span class="token string-property property">&quot;compileANode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aNode&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;styleCompileOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;scriptCompileOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><blockquote><p>详细配置请阅读 <a href="https://github.com/wanwu/san-jest" target="_blank">san-jest</a> 文档。</p></blockquote><h3 id="%E6%94%BE%E7%BD%AE%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6">放置测试文件</h3><p>默认情况下，Jest 将会递归的找到整个工程里所有 <code>.spec.js</code> 或 <code>.test.js</code> 扩展名的文件。如果这不符合你的需求，你也可以在 <code>package.json</code> 里的配置段落中<a href="https://jestjs.io/docs/zh-Hans/configuration#testregex-string-array-string" target="_blank">改变它的 <code>testRegex</code></a>。</p><p>Jest 推荐你在被测试代码的所在目录下创建一个 <code>__tests__</code> 目录，但你也可以为你的测试文件随意设计自己习惯的文件结构。不过要当心 Jest 会为快照测试在临近测试文件的地方创建一个 <code>__snapshots__</code> 目录。</p><h3 id="%E6%B5%8B%E8%AF%95%E8%A6%86%E7%9B%96%E7%8E%87">测试覆盖率</h3><p>Jest 可以被用来生成多种格式的测试覆盖率报告。以下是一个简单的起步的例子：</p><p>扩展你的 jest 配置 (通常在 <code>package.json</code> 或 <code>jest.config.js</code> 中) 的 <code>collectCoverage</code> 选项，然后添加 <code>collectCoverageFrom</code> 数组来定义需要收集测试覆盖率信息的文件。</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token string-property property">&quot;collectCoverage&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;collectCoverageFrom&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*.{js}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!**/node_modules/**&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>这样就会开启<a href="https://jestjs.io/docs/zh-Hans/configuration#coveragereporters-array-string" target="_blank">默认格式的测试覆盖率报告</a>。你可以通过 <code>coverageReporters</code> 选项来定制它们。</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token string-property property">&quot;coverageReporters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text-summary&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>更多文档内容请移步至 <a href="https://jestjs.io/docs/zh-Hans/configuration#collectcoverage-boolean" target="_blank">Jest 配置文档</a>，在那里你可以找到覆盖率阀值、目标输出目录等选项。</p><h3 id="%E6%B5%8B%E8%AF%95%E8%A7%84%E8%8C%83%E7%A4%BA%E4%BE%8B">测试规范示例</h3><p>如果你已经熟悉了 Jasmine，你应该很适应 Jest 的<a href="https://jestjs.io/docs/zh-Hans/expect" target="_blank">断言 API</a>：</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>attach<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;san-test-utils&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> component <span class="token keyword">from</span> <span class="token string">&#39;./component&#39;</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;is a San instance&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">attach</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">isSanInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="%E5%BF%AB%E7%85%A7%E6%B5%8B%E8%AF%95">快照测试</h3><p>当你用 San Test Utils 挂载一个组件时，你可以访问到 HTML 根元素。这可以保存为一个快照为 <a href="https://jestjs.io/docs/zh-Hans/snapshot-testing" target="_blank">Jest 快照测试</a>所用。</p><pre class="language-js"><code class="language-js"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;renders correctly&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">attach</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99">相关资料</h3><ul><li><a href="https://github.com/ecomfe/san-test-utils/tree/master/docs/demo/jest" target="_blank">该设置的示例工程</a></li><li><a href="https://jestjs.io/" target="_blank">Jest</a></li><li><a href="https://github.com/babel/babel-preset-env" target="_blank">Babel preset env</a></li></ul></div></div></div><aside class="toc"><ul class="tree"></ul></aside></article></div></div><script src="/san-test-utils/static/js/chunk-vendors.js"></script><script src="/san-test-utils/static/js/client-entry.js"></script></body></html>