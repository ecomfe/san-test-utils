<!doctype html><html><head><meta charset="utf-8"/><title>san-test-utils</title><link rel="icon" href="https://baidu.github.io/san/img/favicon.ico"><script>window['SAN_DOCIT'] = {};</script><base href="/san-test-utils/"><meta name="description" content="单元测试实用工具库"><link href="/san-test-utils/static/css/chunk-vendors.css" rel="stylesheet"></head><body><div id="app"><div id="site"><header id="header"><a href="/san-test-utils/" class="navbar"><img src="/san-test-utils/logo.svg" alt="Home" class="logo"> <span>san-test-utils</span></a><ul></ul></header><aside id="sidebar" class="sidebar"><ul class="tree"><li><span>介绍</span><ul><li data-id="/"><a href="/san-test-utils/" onclick="return false;">介绍</a></li></ul></li><li><span>教程</span><ul><li data-id="/guides/start/"><a href="/san-test-utils/guides/start/" onclick="return false;">起步</a></li><li data-id="/guides/common-tips/"><a href="/san-test-utils/guides/common-tips/" onclick="return false;">常用技巧</a></li><li data-id="/guides/event/"><a href="/san-test-utils/guides/event/" onclick="return false;">测试键盘、鼠标等其它 DOM 事件</a></li><li data-id="/guides/test-runner/"><a href="/san-test-utils/guides/test-runner/" onclick="return false;">选择一个测试运行器</a></li><li data-id="/guides/jest-demo/"><a href="/san-test-utils/guides/jest-demo/" onclick="return false;">用 Jest 测试组件</a></li><li data-id="/guides/mocha-demo/"><a href="/san-test-utils/guides/mocha-demo/" onclick="return false;">用 Mocha 和 webpack 测试组件</a></li><li data-id="/guides/karma-demo/"><a href="/san-test-utils/guides/karma-demo/" onclick="return false;">用 Karma 测试组件</a></li><li data-id="/guides/async/"><a href="/san-test-utils/guides/async/" onclick="return false;">测试异步行为</a></li></ul></li><li><span>API</span><ul><li data-id="/api/attach/"><a href="/san-test-utils/api/attach/" onclick="return false;">attach</a></li><li data-id="/api/shallowAttach/"><a href="/san-test-utils/api/shallowAttach/" onclick="return false;">shallowAttach</a></li><li data-id="/api/render/"><a href="/san-test-utils/api/render/" onclick="return false;">render</a></li><li data-id="/api/renderToString/"><a href="/san-test-utils/api/renderToString/" onclick="return false;">renderToString</a></li><li data-id="/api/selector/"><a href="/san-test-utils/api/selector/" onclick="return false;">选择器</a></li><li data-id="/api/createWrapper/"><a href="/san-test-utils/api/createWrapper/" onclick="return false;">createWrapper</a></li><li data-id="/api/config/"><a href="/san-test-utils/api/config/" onclick="return false;">配置</a></li></ul></li><li><span>Wrapper</span><ul><li data-id="/wrapper/index/"><a href="/san-test-utils/wrapper/index/" onclick="return false;">属性</a></li><li data-id="/wrapper/attributes/"><a href="/san-test-utils/wrapper/attributes/" onclick="return false;">attributes</a></li><li data-id="/wrapper/classes/"><a href="/san-test-utils/wrapper/classes/" onclick="return false;">classes</a></li><li data-id="/wrapper/contains/"><a href="/san-test-utils/wrapper/contains/" onclick="return false;">contains</a></li><li data-id="/wrapper/fired/"><a href="/san-test-utils/wrapper/fired/" onclick="return false;">fired</a></li><li data-id="/wrapper/firedByOrder/"><a href="/san-test-utils/wrapper/firedByOrder/" onclick="return false;">firedByOrder</a></li><li data-id="/wrapper/data/"><a href="/san-test-utils/wrapper/data/" onclick="return false;">data</a></li><li data-id="/wrapper/detach/"><a href="/san-test-utils/wrapper/detach/" onclick="return false;">detach</a></li><li data-id="/wrapper/dispatched/"><a href="/san-test-utils/wrapper/dispatched/" onclick="return false;">dispatched</a></li><li data-id="/wrapper/dispatchedByOrder/"><a href="/san-test-utils/wrapper/dispatchedByOrder/" onclick="return false;">dispatchedByOrder</a></li><li data-id="/wrapper/exists/"><a href="/san-test-utils/wrapper/exists/" onclick="return false;">exists</a></li><li data-id="/wrapper/find/"><a href="/san-test-utils/wrapper/find/" onclick="return false;">find</a></li><li data-id="/wrapper/findAll/"><a href="/san-test-utils/wrapper/findAll/" onclick="return false;">findAll</a></li><li data-id="/wrapper/html/"><a href="/san-test-utils/wrapper/html/" onclick="return false;">html</a></li><li data-id="/wrapper/is/"><a href="/san-test-utils/wrapper/is/" onclick="return false;">is</a></li><li data-id="/wrapper/isEmpty/"><a href="/san-test-utils/wrapper/isEmpty/" onclick="return false;">isEmpty</a></li><li data-id="/wrapper/isVisible/"><a href="/san-test-utils/wrapper/isVisible/" onclick="return false;">isVisible</a></li><li data-id="/wrapper/isSanInstance/"><a href="/san-test-utils/wrapper/isSanInstance/" onclick="return false;">isSanInstance</a></li><li data-id="/wrapper/setChecked/"><a href="/san-test-utils/wrapper/setChecked/" onclick="return false;">setChecked</a></li><li data-id="/wrapper/setData/"><a href="/san-test-utils/wrapper/setData/" onclick="return false;">setData</a></li><li data-id="/wrapper/setMethods/"><a href="/san-test-utils/wrapper/setMethods/" onclick="return false;">setMethods</a></li><li data-id="/wrapper/setSelected/"><a href="/san-test-utils/wrapper/setSelected/" onclick="return false;">setSelected</a></li><li data-id="/wrapper/setValue/"><a href="/san-test-utils/wrapper/setValue/" onclick="return false;">setValue</a></li><li data-id="/wrapper/text/"><a href="/san-test-utils/wrapper/text/" onclick="return false;">text</a></li><li data-id="/wrapper/trigger/"><a href="/san-test-utils/wrapper/trigger/" onclick="return false;">trigger</a></li></ul></li><li><span>WrapperArray</span><ul><li data-id="/wrapperArray/index/"><a href="/san-test-utils/wrapperArray/index/" onclick="return false;">属性</a></li><li data-id="/wrapperArray/at/"><a href="/san-test-utils/wrapperArray/at/" onclick="return false;">at</a></li><li data-id="/wrapperArray/detach/"><a href="/san-test-utils/wrapperArray/detach/" onclick="return false;">detach</a></li><li data-id="/wrapperArray/filter/"><a href="/san-test-utils/wrapperArray/filter/" onclick="return false;">filter</a></li><li data-id="/wrapperArray/is/"><a href="/san-test-utils/wrapperArray/is/" onclick="return false;">is</a></li><li data-id="/wrapperArray/isEmpty/"><a href="/san-test-utils/wrapperArray/isEmpty/" onclick="return false;">isEmpty</a></li><li data-id="/wrapperArray/isSanInstance/"><a href="/san-test-utils/wrapperArray/isSanInstance/" onclick="return false;">isSanInstance</a></li><li data-id="/wrapperArray/setChecked/"><a href="/san-test-utils/wrapperArray/setChecked/" onclick="return false;">setChecked</a></li><li data-id="/wrapperArray/setData/"><a href="/san-test-utils/wrapperArray/setData/" onclick="return false;">setData</a></li><li data-id="/wrapperArray/setMethods/"><a href="/san-test-utils/wrapperArray/setMethods/" onclick="return false;">setMethods</a></li><li data-id="/wrapperArray/setValue/"><a href="/san-test-utils/wrapperArray/setValue/" onclick="return false;">setValue</a></li><li data-id="/wrapperArray/trigger/"><a href="/san-test-utils/wrapperArray/trigger/" onclick="return false;">trigger</a></li></ul></li><li><span>挂载选项</span><ul><li data-id="/attachOptions/slots/"><a href="/san-test-utils/attachOptions/slots/" onclick="return false;">slots</a></li><li data-id="/attachOptions/stubs/"><a href="/san-test-utils/attachOptions/stubs/" onclick="return false;">stubs</a></li><li data-id="/attachOptions/data/"><a href="/san-test-utils/attachOptions/data/" onclick="return false;">data</a></li><li data-id="/attachOptions/attachToDocument/"><a href="/san-test-utils/attachOptions/attachToDocument/" onclick="return false;">attachToDocument</a></li><li data-id="/attachOptions/parentComponent/"><a href="/san-test-utils/attachOptions/parentComponent/" onclick="return false;">parentComponent</a></li><li data-id="/attachOptions/methods/"><a href="/san-test-utils/attachOptions/methods/" onclick="return false;">methods</a></li></ul></li></ul></aside><article id="content"><div id="router-view" class="router-view"><div class="content markdown-content"><div class="markdown"><h1 id="%E9%80%89%E6%8B%A9%E4%B8%80%E4%B8%AA%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C%E5%99%A8">选择一个测试运行器</h1><p>测试运行器 (test runner) 就是运行测试的程序。</p><p>主流的 JavaScript 测试运行器有很多，但 San Test Utils 都能够支持。它是与测试运行器无关的。</p><p>当然在我们选用测试运行器的时候也需要考虑一些事项：功能集合、性能和对单文件组件预编译的支持等。在仔细比对现有的库之后，我们推荐其中的两个测试运行器：</p><ul><li><p><a href="https://jestjs.io/docs/zh-Hans/getting-started" target="_blank">Jest</a> 是功能最全的测试运行器。它所需的配置是最少的，默认安装了 JSDOM，内置断言且命令行的用户体验非常好。不过你需要一个能够将单文件组件导入到测试中的预处理器。</p></li><li><p><a href="https://github.com/zinserjan/mocha-webpack" target="_blank">mocha-webpack</a> 是一个 webpack + Mocha 的包裹器，同时包含了更顺畅的接口和侦听模式。</p></li></ul><h3 id="%E6%B5%8F%E8%A7%88%E5%99%A8%E7%8E%AF%E5%A2%83">浏览器环境</h3><p>San Test Utils 依赖浏览器环境。技术上讲你可以将其运行在一个真实的浏览器，但是我们并不推荐，因为在不同的平台上都启动真实的浏览器是很复杂的。我们推荐取而代之的是用 <a href="https://github.com/tmpvar/jsdom" target="_blank">JSDOM</a> 在 Node 虚拟浏览器环境运行测试。</p><p>Jest 测试运行器自动设置了 JSDOM。对于其它测试运行器来说，你可以在你的测试入口处使用 <a href="https://github.com/rstacruz/jsdom-global" target="_blank">jsdom-global</a> 手动设置 JSDOM。</p><pre class="language-js"><code class="language-js">npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev jsdom jsdom<span class="token operator">-</span>global</code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// 在测试的设置 / 入口中</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;jsdom-global&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="%E6%B5%8B%E8%AF%95%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6">测试单文件组件</h3><p>San 的单文件组件在它们运行于 Node 或浏览器之前是需要预编译的。我们推荐使用 webpack。</p><p>如何设置请移步下面的教程：</p><ul><li><a href="/san-test-utils/guides/mocha-demo/">用 Mocha 和 webpack 测试单文件组件</a>;</li></ul><h3 id="%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99">相关资料</h3><ul><li><a href="https://github.com/eddyerburgh/vue-unit-test-perf-comparison" target="_blank">测试运行器性能比拼</a></li><li><a href="https://github.com/ecomfe/san-test-utils/tree/master/docs/demo/jest" target="_blank">使用 Jest 的示例工程</a></li><li><a href="https://github.com/ecomfe/san-test-utils/tree/master/docs/demo/mocha" target="_blank">使用 Mocha 的示例工程</a></li><li><a href="https://github.com/ecomfe/san-test-utils/tree/master/docs/demo/karma" target="_blank">使用 Karma 的示例工程</a></li></ul></div></div></div><aside class="toc"><ul class="tree"></ul></aside></article></div></div><script src="/san-test-utils/static/js/chunk-vendors.js"></script><script src="/san-test-utils/static/js/client-entry.js"></script></body></html>